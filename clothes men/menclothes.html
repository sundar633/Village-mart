<!DOCTYPE html>
<html lang="en">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" ...>
<link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-dS0Eypc8EwOQOlV0PyF+/AJH8UwJ3WgU1qU1IB9U7HvKn8gdO+l5nKKNLJ5UZB3KH3L3GyS0kp7ozxO1a4Fq4g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Village Mart - Clothes</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
    * { box-sizing: border-box; }
    body {
  margin: 0;
  font-family: 'Lato', sans-serif;
  background: white;
  padding-top: 80px;
}


    .header {
      display: flex;
      align-items: center;
      justify-content: center;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background-color: #fff;
      padding: 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      z-index: 1000;
    }

    .header h1 {
      font-size: 24px;
      margin: 0;
      font-weight: 600;
    }

    .cart-icon {
      position: absolute;
      right: 10px;
      background: none;
      border: none;
      cursor: pointer;
    }

    .cart-icon img {
      width: 30px;
      height: 30px;
    }
.heart-btn {
  font-size: 22px;
  color: rgb(205, 18, 18);
  background: none;
  border: none;
  cursor: pointer;
  position: absolute;
  right: 60px;
  top: 20px;
  padding: 0;
  font-weight: bold;
}
.heart-icon {
  right: 50px;
}

.heart-symbol {
  display: inline-block;
  width: 30px;
  height: 30px;
  font-size: 30px;
  color: rgb(221, 17, 17);
  line-height: 30px;
  text-align: center;
  font-weight: bold;
  user-select: none;
}

    .cart-badge {
      position: absolute;
      top: 10px;
      right: 5px;
      background: rgb(214, 13, 13);
      color: white;
      border-radius: 50%;
      font-size: 12px;
      padding: 2px 6px;
      font-weight: bold;
      display: none;
    }

    .bottom-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background: #fff;
      box-shadow: 0 -1px 3px rgba(0,0,0,0.05);
      font-size: 16px;
      flex-wrap: wrap;
    }

    .location {
      display: flex;
      align-items: center;
      gap: 10px;
      width: 100%;
    }

    .location img {
      width: 24px;
    }

    #search-input {
      margin-top: 5px;
      padding: 6px 30px 6px 35px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 6px;
      width: 100%;
      max-width: 200px;
      background: #fff url('https://img.icons8.com/ios-filled/20/000000/search--v1.png') no-repeat 10px center;
      background-size: 16px 16px;
    }

    .category-section {
      padding: 20px;
    }

    .category-title {
      font-size: 20px;
      margin-bottom: 10px;
    }

    .item-list {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
    }

   .item-card {
  width: calc(50% - 10px);
  background: rgba(240, 250, 255, 0.2); /* transparent icy */
  backdrop-filter: blur(6px);
  border-radius: 8px;
  padding: 10px;
  box-shadow: 0 2px 4px rgba(255,255,255,0.1);
  position: relative;
  animation: fadeSlideUp 0.6s ease forwards;
  opacity: 0;
}




    .item-card img {
      width: 100%;
      height: 160px;
      object-fit: cover;
      border-radius: 6px;
    }

    .item-card h4 {
      margin: 8px 0 4px;
      font-size: 16px;
    }

    .item-card p {
      font-size: 14px;
      color: #555;
    }

    .heart {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 20px;
      color: white;
      cursor: pointer;
      text-shadow: 0 0 3px black;
      transition: color 0.3s ease;
    }

    .heart.favorited {
      color: red;
    }
    .slider {
  width: 100%;
  max-width: 800px;
  margin: 20px auto;
  overflow: hidden;
  border-radius: 10px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}

.slides {
  display: flex;
  width: 400%;
  animation: slideAnim 16s infinite;
}

.slide {
  width: 100%;
  flex-shrink: 0;
  display: none;
}

.slide.active {
  display: block;
}

@keyframes slideAnim {
  0% { transform: translateX(0%); }
  25% { transform: translateX(0%); }
  30% { transform: translateX(-100%); }
  50% { transform: translateX(-100%); }
  55% { transform: translateX(-200%); }
  75% { transform: translateX(-200%); }
  80% { transform: translateX(-300%); }
  100% { transform: translateX(-300%); }
}
.back-btn {
  position: absolute;
  left: 10px;
  background: none;
  border: none;
  cursor: pointer;
}

.back-btn img {
  width: 30px;
  height: 30px;
}
.gender-circle {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  overflow: hidden;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  animation: pulseBorder 2s infinite ease-in-out;
}

.men-circle {
  border: 4px solid #007bff;
  box-shadow: 0 0 10px #007bff;
  background: #f0f8ff;
}

.women-circle {
  border: 4px solid #e91e63;
  box-shadow: 0 0 10px #e91e63;
  background: #fff0f5;
}

@keyframes pulseBorder {
  0% {
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    transform: scale(1);
  }
  50% {
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
    transform: scale(1.05);
  }
  100% {
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    transform: scale(1);
  }
}
@keyframes fadeSlideUp {
  0% {
    opacity: 0;
    transform: translateY(30px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}
@keyframes slideUpFade {
  0% {
    opacity: 0;
    transform: translateY(40px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.gender-circle {
  animation: slideUpFade 0.6s ease both;
}

.gender-circle.men-circle {
  animation-delay: 0.2s;
}

.gender-circle.women-circle {
  animation-delay: 0.4s;
}
.heart-toggle {
  position: absolute;
  top: 8px;
  right: 8px;
  font-size: 20px;
  background: none;
  border: none;
  color: white;
  cursor: pointer;
  transition: transform 0.3s ease, color 0.3s ease;
  z-index: 10;
}

.heart-toggle.favorited {
  color: red;
  animation: popHeart 0.4s ease;
}

@keyframes popHeart {
  0% {
    transform: scale(1);
    color: white;
  }
  50% {
    transform: scale(1.5);
    color: pink;
  }
  100% {
    transform: scale(1);
    color: red;
  }
}
.color-circle {
  width: 25px;
  height: 25px;
  border-radius: 50%;
  cursor: pointer;
  border: 2px solid #ccc;
}

.color-circle.selected {
  border: 3px solid #000;
  box-shadow: 0 0 5px rgba(0,0,0,0.5);
}
@keyframes fadeSlideUpWelcome {
  0% { transform: translateY(20px); opacity: 0; }
  100% { transform: translateY(0); opacity: 1; }
}


  </style>
</head>
<body>

 <!-- Men/Women Selection Popup -->
<div id="gender-popup" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.6); display: flex; align-items: center; justify-content: center; z-index: 2000;">
  <div style="background: white; padding: 30px 20px; border-radius: 12px; text-align: center; box-shadow: 0 0 20px rgba(0,0,0,0.3); width: 90%; max-width: 400px; position: relative;">

    <!-- ❌ Close Button -->
    <button onclick="window.location.href='index.html'" style="
      position: absolute;
      top: -20px;
      left: 50%;
      transform: translateX(-50%);
      background: #fff;
      border: 2px solid #ccc;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      font-size: 20px;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    ">×</button>

    <h2 style="margin-bottom: 20px;">You Are Shopping for</h2>
    <div style="display: flex; justify-content: space-around;">

      <!-- Men Option -->
      <div onclick="selectGender('men')" style="cursor:pointer;">
        <div class="gender-circle men-circle">
          <video autoplay muted loop playsinline style="width: 100%; height: 100%; object-fit: cover; transform: translate(4px, 4px);">
            <source src="men.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
        <p style="margin-top: 10px; font-weight: bold;">Men Fashion</p>
      </div>

      <!-- Women Option -->
      <div onclick="selectGender('women')" style="cursor:pointer;">
        <div class="gender-circle women-circle">
          <video autoplay muted loop playsinline style="width: 100%; height: 100%; object-fit: cover; transform: translate(4px, 4px);">
            <source src="women.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
        <p style="margin-top: 10px; font-weight: bold;">Women Fashion</p>
      </div>

    </div>
  </div>
</div>

<!-- Men Intro Animation -->
<div id="men-animation" style="
  position: fixed; top: 0; left: 0; right: 0; bottom: 0;
  background: white; z-index: 9999;
  display: none; flex-direction: column;
  align-items: center; justify-content: center;
  font-family: 'Poppins', sans-serif;
">
  <div class="gender-circle men-circle" style="animation: pulseBorder 2s infinite ease-in-out;">
    <video id="men-intro-video" autoplay muted loop playsinline style="width: 100%; height: 100%; object-fit: cover; transform: translate(4px, 4px);">
      <source src="images/men 2.mp4" type="video/mp4">
    </video>
  </div>
  <h2 class="welcome-text" style="margin-top: 20px; font-size: 20px; font-weight: bold; opacity: 0; animation: fadeSlideUpWelcome 2s ease forwards;">Men's Collection...</h2>
</div>



<!-- Main Content Hidden Initially -->
<div id="main-content" style="display: none;">

  <!-- Header -->
  <div class="header">
    <!-- Back Button -->
    <button class="back-btn" onclick="window.location.href='index.html'">
      <img src="https://img.icons8.com/ios-filled/50/000000/back.png" alt="Back">
    </button>

    <h1>Village Mart</h1>
    <!-- Heart Icon -->
    <button class="cart-icon heart-icon" onclick="alert('Favorites clicked!')">
      <span class="heart-symbol">♥</span>
    </button>

    <!-- Cart Icon -->
    <button class="cart-icon" onclick="alert('Cart clicked!')">
      <img src="https://img.icons8.com/ios-filled/50/000000/shopping-cart.png" alt="Cart">
      <span class="cart-badge" id="cart-count">0</span>
    </button>
  </div>

  <!-- Bottom bar -->
  <div class="bottom-bar">
    <div class="location">
      <img src="https://img.icons8.com/ios-filled/50/000000/marker.png" alt="Location">
      <span id="display-location">Detecting location...</span>
   <input type="text" id="search-input" placeholder="Search clothes..." oninput="handleSearch()" />

    </div>
  </div>
  <!-- Men Clothes Heading (Small gap from top) -->
<div style="background: white; padding: 10px 0 4px 0; margin-top: 0;">
  <h2 style="color: black; text-align: center; font-size: 20px; margin: 0;">Men Clothes</h2>
  
</div>


<!-- Sticky Category Scroll Bar -->
<div style="position: sticky; top: 84px; z-index: 1000; background: rgb(255, 255, 255); padding: 2px 0 10px 0;">
  <div style="display: flex; overflow-x: auto; gap: 10px; padding: 8px 15px;">

       <div class="category-button" style="flex: 0 0 auto; text-align: center; font-size: 12px;">
      <div style="width: 38px; height: 38px; border-radius: 50%; background: rgb(255, 255, 255); display: flex; align-items: center; justify-content: center; overflow: hidden; margin: auto;">
         <video autoplay muted loop playsinline style="width: 70%; height: 70%; object-fit: contain;">
  <source src="images/all.mp4" type="video/mp4">
</video>

      </div>
      <div style="color: black; font-weight: 500; margin-top: 4px;">All</div>
    </div>

    
     <!-- Shirts -->
    <div class="category-button" style="flex: 0 0 auto; text-align: center; font-size: 12px;">
      <div style="width: 38px; height: 38px; border-radius: 50%; background: rgb(255, 255, 255); display: flex; align-items: center; justify-content: center; overflow: hidden; margin: auto;">
      <video autoplay muted loop playsinline style="width: 70%; height: 70%; object-fit: contain;">
  <source src="images/shirts.mp4" type="video/mp4">
</video>


      </div>
      <div style="color: black; font-weight: 500; margin-top: 4px;">Shirts</div>
    </div>

    <!-- Jeans -->
    <div class="category-button" style="flex: 0 0 auto; text-align: center; font-size: 12px;">
      <div style="width: 38px; height: 38px; border-radius: 50%; background: rgb(255, 255, 255); display: flex; align-items: center; justify-content: center; overflow: hidden; margin: auto;">
         <video autoplay muted loop playsinline style="width: 70%; height: 70%; object-fit: contain;">
  <source src="images/pant.mp4" type="video/mp4">
</video>

      </div>
      <div style="color: black; font-weight: 500; margin-top: 4px;">Jeans</div>
    </div>

    <div class="category-button" style="flex: 0 0 auto; text-align: center; font-size: 12px;">
      <div style="width: 38px; height: 38px; border-radius: 50%; background: rgb(255, 255, 255); display: flex; align-items: center; justify-content: center; overflow: hidden; margin: auto;">
        <video autoplay muted loop playsinline style="width: 70%; height: 70%; object-fit: contain;">
  <source src="images/tshirts.mp4" type="video/mp4">
</video>

      </div>
      <div style="color: black; font-weight: 500; margin-top: 4px;">T-Shirts</div>
    </div>

    <!-- Boxers -->
    <div class="category-button" style="flex: 0 0 auto; text-align: center; font-size: 12px;">
      <div style="width: 38px; height: 38px; border-radius: 50%; background: rgb(255, 255, 255); display: flex; align-items: center; justify-content: center; overflow: hidden; margin: auto;">
        <video autoplay muted loop playsinline style="width: 70%; height: 70%; object-fit: contain;">
  <source src="images/shorts.mp4" type="video/mp4">
</video>

      </div>
      <div style="color: black; font-weight: 500; margin-top: 4px;">Boxers</div>
    </div>

    <!-- Inners -->
    <div class="category-button" style="flex: 0 0 auto; text-align: center; font-size: 12px;">
      <div style="width: 38px; height: 38px; border-radius: 50%; background: rgb(255, 255, 255); display: flex; align-items: center; justify-content: center; overflow: hidden; margin: auto;">
        <video autoplay muted loop playsinline style="width: 70%; height: 70%; object-fit: contain;">
  <source src="images/inners.mp4" type="video/mp4">
</video>

      </div>
      <div style="color: black; font-weight: 500; margin-top: 4px;">Inners</div>
    </div>

    <div class="category-button" style="flex: 0 0 auto; text-align: center; font-size: 12px;">
      <div style="width: 38px; height: 38px; border-radius: 50%; background: rgb(255, 255, 255); display: flex; align-items: center; justify-content: center; overflow: hidden; margin: auto;">
        <video autoplay muted loop playsinline style="width: 70%; height: 70%; object-fit: contain;">
  <source src="images/hoddie.mp4" type="video/mp4">
</video>

      </div>
      <div style="color: black; font-weight: 500; margin-top: 4px;">Hoodie</div>
    </div>

    <div class="category-button" style="flex: 0 0 auto; text-align: center; font-size: 12px;">
      <div style="width: 38px; height: 38px; border-radius: 50%; background: rgb(255, 255, 255); display: flex; align-items: center; justify-content: center; overflow: hidden; margin: auto;">
         <video autoplay muted loop playsinline style="width: 70%; height: 70%; object-fit: contain;">
  <source src="images/formals.mp4" type="video/mp4">
</video>

      </div>
      <div style="color: black; font-weight: 500; margin-top: 4px;">Formals</div>
    </div>
    <div class="category-button" style="flex: 0 0 auto; text-align: center; font-size: 12px;">
      <div style="width: 38px; height: 38px; border-radius: 50%; background: rgb(255, 255, 255); display: flex; align-items: center; justify-content: center; overflow: hidden; margin: auto;">
         <video autoplay muted loop playsinline style="width: 70%; height: 70%; object-fit: contain;">
  <source src="images/court.mp4" type="video/mp4">
</video>

      </div>
      <div style="color: black; font-weight: 500; margin-top: 4px;">Blazers</div>
    </div>

    <!-- Sweaters -->
    <div class="category-button" style="flex: 0 0 auto; text-align: center; font-size: 12px;">
      <div style="width: 38px; height: 38px; border-radius: 50%; background: rgb(255, 255, 255); display: flex; align-items: center; justify-content: center; overflow: hidden; margin: auto;">
        <video autoplay muted loop playsinline style="width: 70%; height: 70%; object-fit: contain;">
  <source src="images/sweater.mp4" type="video/mp4">
</video>

      </div>
      <div style="color: black; font-weight: 500; margin-top: 4px;">Sweaters</div>
    </div>

    <!-- Sweaters -->
    <div class="category-button" style="flex: 0 0 auto; text-align: center; font-size: 12px;">
      <div style="width: 38px; height: 38px; border-radius: 50%; background: rgb(255, 255, 255); display: flex; align-items: center; justify-content: center; overflow: hidden; margin: auto;">
        <video autoplay muted loop playsinline style="width: 70%; height: 70%; object-fit: contain;">
  <source src="images/dhotis.mp4" type="video/mp4">
</video>

      </div>
      <div style="color: black; font-weight: 500; margin-top: 4px;">Dhoti's</div>
    </div>
    <!-- Sweaters -->
    <div class="category-button" style="flex: 0 0 auto; text-align: center; font-size: 12px;">
      <div style="width: 38px; height: 38px; border-radius: 50%; background: rgb(255, 255, 255); display: flex; align-items: center; justify-content: center; overflow: hidden; margin: auto;">
        <video autoplay muted loop playsinline style="width: 70%; height: 70%; object-fit: contain;">
  <source src="images/cap.mp4" type="video/mp4">
</video>

      </div>
      <div style="color: black; font-weight: 500; margin-top: 4px;">Caps</div>
    </div>
    <!-- Sweaters -->
    <div class="category-button" style="flex: 0 0 auto; text-align: center; font-size: 12px;">
      <div style="width: 38px; height: 38px; border-radius: 50%; background: rgb(255, 255, 255); display: flex; align-items: center; justify-content: center; overflow: hidden; margin: auto;">
        <video autoplay muted loop playsinline style="width: 70%; height: 70%; object-fit: contain;">
  <source src="images/kids.mp4" type="video/mp4">
</video>

      </div>
      <div style="color: black; font-weight: 500; margin-top: 4px;">Kid's</div>
    </div>
    

  </div>
</div>
<!-- Items Section with dynamic background -->
<div id="items-section" style="padding: 20px 10px;">
  <div id="items-container" class="item-list"></div>
</div>



<!-- Popup for Item Details -->
<div id="item-popup" style="display:none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.6); z-index: 3000; align-items: center; justify-content: center;">
  <div style="background: white; width: 90%; max-width: 400px; border-radius: 10px; overflow-y: auto; max-height: 90vh; padding-bottom: 20px; position: relative;">
    
    <!-- Close Button -->
    <button onclick="closePopup()" style="position: absolute; top: 10px; left: 10px; background: #ddd; border: none; border-radius: 50%; width: 30px; height: 30px; font-weight: bold; cursor: pointer;">×</button>
    
    <img id="popup-img" src="" style="width: 100%; height: 200px; object-fit: cover; border-radius: 10px 10px 0 0;">
    
    <div style="padding: 15px;">
  <h3 id="popup-brand"></h3>
<p id="popup-desc" style="font-size: 14px; color: #555;"></p>
<p id="popup-price" style="font-size: 15px; font-weight: bold; color: green; margin-bottom: 10px;"></p>


  <div style="display: flex; gap: 20px; flex-wrap: wrap; margin-bottom: 15px;">
    <!-- Size Selection -->
    <div style="flex: 1;">
      <label for="size-select"><strong>Select Size:</strong></label>
      <select id="size-select" style="width: 100%; padding: 8px; margin-top: 5px;">
        <option>XS</option>
        <option>S</option>
        <option>M</option>
        <option>L</option>
        <option>XL</option>
        <option>2XL</option>
        <option>3XL</option>
        <option>4XL</option>
      </select>
    </div>

    <!-- Color Selection -->
    <div style="flex: 1;">
      <label><strong>Select Color:</strong></label>
      <div id="color-options" style="display: flex; gap: 8px; margin-top: 5px;">
        <div class="color-circle" data-color="Red" style="background: red;"></div>
        <div class="color-circle" data-color="Blue" style="background: blue;"></div>
        <div class="color-circle" data-color="Green" style="background: green;"></div>
        <div class="color-circle" data-color="Black" style="background: black;"></div>
      </div>
    </div>
  </div>

  <!-- Buttons Side by Side -->
  <div style="display: flex; gap: 10px;">
    <button id="order-now-btn" style="flex: 1; background: #28a745; color: white; padding: 10px; border: none; border-radius: 6px;">Order Now</button>
   <button id="add-to-cart-btn" style="flex: 1; background: #007bff; color: white; padding: 10px; border: none; border-radius: 6px;">Add to Cart</button>

  </div>
</div>

  </div>
</div>
</div> 

  
<div id="cart-mini" style="display:none; position:fixed; top:90px; right:10px; width:300px; background:white; border:1px solid #ccc; border-radius:8px; padding:10px; box-shadow:0 4px 8px rgba(0,0,0,0.2); z-index:9999;">
  <div id="cart-items-list" style="max-height:200px; overflow-y:auto;"></div>
  <button id="place-order-btn" style="margin-top:10px; width:100%; background: green; color: white; border: none; padding: 8px 12px; border-radius: 6px; font-size: 14px;">Place Order</button>
</div>




  <!-- JS for location -->
<script src="items.js"></script>
<script>
  function detectLocation() {
    if ("geolocation" in navigator) {
      navigator.geolocation.getCurrentPosition(
        (pos) => {
          const lat = pos.coords.latitude;
          const lon = pos.coords.longitude;
          fetch(`https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lon}&format=json`)
            .then(res => res.json())
            .then(data => {
              const village = data.address.village || data.address.town || data.address.city || "Unknown";
              const state = data.address.state || "Unknown";
              document.getElementById("display-location").textContent = `${village}, ${state}`;
            })
            .catch(() => {
              document.getElementById("display-location").textContent = "Location unavailable";
            });
        },
        () => {
          document.getElementById("display-location").textContent = "Location unavailable";
        }
      );
    } else {
      document.getElementById("display-location").textContent = "Geolocation not supported";
    }
  }

 function selectGender(type) {
  document.getElementById("gender-popup").style.display = "none";

  if (type === 'men') {
    const animationDiv = document.getElementById("men-animation");
    animationDiv.style.display = "flex";

    // Optionally reset video playback:
    const introVideo = document.getElementById("men-intro-video");
    introVideo.currentTime = 0;
    introVideo.play();

    setTimeout(() => {
      animationDiv.style.display = "none";
      document.getElementById("main-content").style.display = "block";
    }, 3000);
  } else {
    window.location.href = "clothes women/women.html";
  }
}



  const itemContainer = document.getElementById("items-container");

  function renderItems(filter) { 
  itemContainer.innerHTML = "";

  const section = document.getElementById("items-section");
  section.style.background = "white";

  const filtered = filter === "All" ? items : items.filter(i => i.category === filter);
  filtered.forEach((item, index) => {
    const card = document.createElement("div");
    card.className = "item-card";
    card.style.background = "#f0faff";
    card.style.animationDelay = `${index * 0.05}s`;

    card.innerHTML = `
      <div style="position: relative;">
        <img src="${item.image}" alt="${item.brand}">
        <button class="heart-toggle" onclick="toggleHeart(this)">♡</button>
      </div>
      <div class="item-info">
        <h4>${item.brand}</h4>
        <p>${item.desc}</p>
        <p>⭐ ${item.rating}</p>
        <p><strong>${item.price}</strong></p>
      </div>
    `;

    // Only text area triggers popup
    card.querySelector('.item-info').onclick = () => {
      showPopup(item);
    };

    itemContainer.appendChild(card);
  });
}


  function showPopup(item) {
  document.getElementById("popup-img").src = item.image;
  document.getElementById("popup-brand").textContent = item.brand;
  document.getElementById("popup-desc").textContent = item.desc;
  document.getElementById("popup-price").textContent = item.price;
  document.getElementById("item-popup").style.display = "flex";
}

  function closePopup() {
    document.getElementById("item-popup").style.display = "none";
  }

  // Attach category buttons
  document.querySelectorAll(".bottom-bar ~ div div div").forEach(btn => {
    btn.onclick = () => {
      renderItems(btn.textContent.trim());
    };
  });
  function toggleHeart(button) {
  button.classList.toggle('favorited');
  button.textContent = button.classList.contains('favorited') ? '♥' : '♡';
}

  function handleSearch() {
    const query = document.getElementById("search-input").value.toLowerCase();
    const filteredItems = items.filter(item =>
      item.brand.toLowerCase().includes(query) ||
      item.desc.toLowerCase().includes(query)
    );
    renderItemsByList(filteredItems);
  }

  function renderItemsByList(filtered) {
    itemContainer.innerHTML = "";

    const section = document.getElementById("items-section");
    section.style.background = "white";

    filtered.forEach((item, index) => {
      const card = document.createElement("div");
      card.className = "item-card";
      card.style.background = "#f0faff";
      card.style.animationDelay = `${index * 0.05}s`;

      card.innerHTML = `
        <div style="position: relative;">
          <img src="${item.image}" alt="${item.brand}">
          <button class="heart-toggle" onclick="toggleHeart(this)">♡</button>
        </div>
        <div class="item-info">
          <h4>${item.brand}</h4>
          <p>${item.desc}</p>
          <p>⭐ ${item.rating}</p>
          <p><strong>${item.price}</strong></p>
        </div>
      `;

      card.querySelector('.item-info').onclick = () => {
        showPopup(item);
      };

      itemContainer.appendChild(card);
    });
  }

let selectedColor = null;

document.querySelectorAll('.color-circle').forEach(circle => {
  circle.addEventListener('click', () => {
    // Deselect all
    document.querySelectorAll('.color-circle').forEach(c => c.classList.remove('selected'));
    // Select clicked
    circle.classList.add('selected');
    selectedColor = circle.dataset.color;
    console.log("Selected color:", selectedColor);
  });
});
let cartItems = [];

// 🛒 Handle Add to Cart
document.getElementById("add-to-cart-btn").onclick = function () {
  const selectedSize = document.getElementById('size-select').value;
  const selectedColorElement = document.querySelector('.color-circle.selected');

  if (!selectedSize || !selectedColorElement) {
    showTemporaryMessage("Select Size and Color", 2000);
    return;
  }

  const image = document.getElementById("popup-img").src;
  const name = document.getElementById("popup-brand").textContent;
  const price = document.getElementById("popup-price").textContent;
  const color = selectedColorElement.dataset.color;

  cartItems.push({ image, name, price, size: selectedSize, color });

  updateCartDisplay();
  closePopup();
};


// 🧾 Update Cart Count and Show Place Order Button
function updateCartDisplay() {
  const count = cartItems.length;
  const badge = document.getElementById("cart-count");
  badge.textContent = count;
  badge.style.display = count > 0 ? "inline-block" : "none";

  const existingOrderBtn = document.getElementById("place-order-btn");

  if (count > 0 && !existingOrderBtn) {
    const orderBtn = document.createElement("button");
    orderBtn.id = "place-order-btn";
    orderBtn.textContent = "Place Order";
    orderBtn.style = "position: absolute; top: 60px; right: 10px; background: green; color: white; border: none; padding: 6px 10px; border-radius: 5px; font-size: 14px;";
    document.body.appendChild(orderBtn);

    orderBtn.onclick = () => {
      if (cartItems.length === 0) {
        showTemporaryMessage("No items in cart", 3000);
      } else {
        // Optional: store in localStorage or go to order page
        window.location.href = "order.html";
      }
    };
  } else if (count === 0 && existingOrderBtn) {
    existingOrderBtn.remove();
  }
}


// 🛍️ Cart Button Click
document.querySelector('.cart-icon:not(.heart-icon)').onclick = function () {
  if (cartItems.length === 0) {
    showTemporaryMessage("No items in cart", 3000, this);
  } else {
    showTemporaryMessage(`Cart: ${cartItems.length} item(s)`, 3000, this);
  }
};

// ✅ Show temporary floating message
function showTemporaryMessage(msg, duration = 2000, relativeTo = null) {
  const messageDiv = document.createElement("div");
  messageDiv.textContent = msg;
  messageDiv.style = `
    position: fixed;
    ${relativeTo ? `top: ${relativeTo.getBoundingClientRect().top + 40}px; left: ${relativeTo.getBoundingClientRect().left}px;` : `top: 70px; right: 20px;`}
    background: #333; color: white;
    padding: 6px 10px;
    border-radius: 6px;
    font-size: 14px;
    z-index: 9999;
    animation: fadeOutMsg ${duration}ms forwards;
  `;
  document.body.appendChild(messageDiv);
  setTimeout(() => messageDiv.remove(), duration);
}

// 👻 Fadeout animation
const styleFade = document.createElement("style");
styleFade.innerHTML = `
  @keyframes fadeOutMsg {
    0% { opacity: 1; }
    80% { opacity: 1; }
    100% { opacity: 0; }
  }
`;
document.head.appendChild(styleFade);

// Show cart items in mini container
function showCartMini() {
  const container = document.getElementById("cart-items-list");
  container.innerHTML = "";

  cartItems.forEach((item, index) => {
    const div = document.createElement("div");
    div.style = "display:flex; align-items:center; justify-content:space-between; border-bottom:1px solid #ddd; padding:5px 0;";
    div.innerHTML = `
      <img src="${item.image}" style="width:40px; height:40px; border-radius:5px;">
      <div style="flex:1; margin-left:8px;">
        <div><strong>${item.name}</strong></div>
        <div style="font-size:12px;">${item.price} | ${item.size} | ${item.color}</div>
      </div>
     <button onclick="removeCartItem(${index})" style="background:none; color:black; border:none; font-size:18px; cursor:pointer;">✕</button>

    `;
    container.appendChild(div);
  });

  document.getElementById("cart-mini").style.display = "block";
  setTimeout(() => document.getElementById("cart-mini").style.display = "none", 3000);
}

function updateCartDisplay() {
  const badge = document.getElementById("cart-count");
  badge.textContent = cartItems.length;
  badge.style.display = cartItems.length > 0 ? "inline-block" : "none";
}

// Update cart and place order button when cart changes
function updateCartDisplay() {
  const count = cartItems.length;
  const badge = document.getElementById("cart-count");
  badge.textContent = count;
  badge.style.display = count > 0 ? "inline-block" : "none";

  const existingOrderBtn = document.getElementById("place-order-btn");

  if (count > 0 && !existingOrderBtn) {
    const orderBtn = document.createElement("button");
    orderBtn.id = "place-order-btn";
    orderBtn.textContent = "Place Order";
    orderBtn.style = "position: absolute; top: 60px; right: 10px; background: green; color: white; border: none; padding: 6px 10px; border-radius: 5px; font-size: 14px;";
    document.body.appendChild(orderBtn);

    // Handle Place Order Click
    orderBtn.onclick = () => {
      window.location.href = "order.html";
      // Or: localStorage.setItem("cart", JSON.stringify(cartItems)); if needed
    };
  } else if (count === 0 && existingOrderBtn) {
    existingOrderBtn.remove();
  }
}

document.getElementById("add-to-cart-btn").onclick = function () {
  const selectedSize = document.getElementById('size-select').value;
  const selectedColorElement = document.querySelector('.color-circle.selected');

  if (!selectedSize || !selectedColorElement) {
    showTemporaryMessage("Select Size and Color", 2000);
    return;
  }

  const image = document.getElementById("popup-img").src;
  const name = document.getElementById("popup-brand").textContent;
  const price = document.getElementById("popup-price").textContent;
  const color = selectedColorElement.dataset.color;

  // Add to cart array
  cartItems.push({ image, name, price, size: selectedSize, color });

  // Update cart badge and button
  updateCartDisplay();

  // Close popup
  closePopup();
};





document.querySelector('.cart-icon:not(.heart-icon)').onclick = function () {
  if (cartItems.length === 0) {
    showTemporaryMessage("No items in cart", 3000);
    return;
  }

  const container = document.getElementById("cart-items-list");
  container.innerHTML = "";

  cartItems.forEach((item, index) => {
    const div = document.createElement("div");
    div.style = "display:flex; align-items:center; justify-content:space-between; border-bottom:1px solid #eee; padding:5px 0;";
    div.innerHTML = `
      <img src="${item.image}" style="width:40px; height:40px; border-radius:5px;">
      <div style="flex:1; margin-left:8px; font-size:12px;">
        <div><strong>${item.name}</strong></div>
        <div>${item.price} | ${item.size} | ${item.color}</div>
      </div>
      <button onclick="removeCartItem(${index})" style="background:red; color:white; border:none; border-radius:4px; padding:2px 6px; font-size:12px; cursor:pointer;">✕</button>
    `;
    container.appendChild(div);
  });

  document.getElementById("cart-mini").style.display = "block";
  setTimeout(() => {
    document.getElementById("cart-mini").style.display = "none";
  }, 3000);
};
function removeCartItem(index) {
  cartItems.splice(index, 1);         // Remove item from array
  updateCartDisplay();                // Update cart count badge

  const container = document.getElementById("cart-items-list");
  container.innerHTML = "";           // Clear container

  // If cart is now empty, hide container and return
  if (cartItems.length === 0) {
    document.getElementById("cart-mini").style.display = "none";
    return;
  }

  // Re-render updated cart
  cartItems.forEach((item, idx) => {
    const div = document.createElement("div");
    div.style = "display:flex; align-items:center; justify-content:space-between; border-bottom:1px solid #eee; padding:5px 0;";
    div.innerHTML = `
      <img src="${item.image}" style="width:40px; height:40px; border-radius:5px;">
      <div style="flex:1; margin-left:8px; font-size:12px;">
        <div><strong>${item.name}</strong></div>
        <div>${item.price} | ${item.size} | ${item.color}</div>
      </div>
      <button onclick="removeCartItem(${idx})" style="background:red; color:white; border:none; border-radius:4px; padding:2px 6px; font-size:12px; cursor:pointer;">✕</button>
    `;
    container.appendChild(div);
  });
}
document.getElementById("order-now-btn").onclick = function () {
  const selectedColorElement = document.querySelector('.color-circle.selected');
  const color = selectedColorElement ? selectedColorElement.dataset.color : null;

  if (!color) {
    showTemporaryMessage("Select Color", 2000);
    return;
  }

  const image = document.getElementById("popup-img").src;
  const price = document.getElementById("popup-price").textContent;

  const orderItem = [{ image, price, color }];
  localStorage.setItem("orderItems", JSON.stringify(orderItem));
  window.location.href = "order.html";
};
document.getElementById("place-order-btn").onclick = function () {
  if (cartItems.length === 0) {
    showTemporaryMessage("No items in cart", 3000);
  } else {
    const orderItems = cartItems.map(item => ({
      image: item.image,
      price: item.price,
      color: item.color
    }));
    localStorage.setItem("orderItems", JSON.stringify(orderItems));
    window.location.href = "order.html";
  }
};



  renderItems("All"); // Load all items by default
  detectLocation();
</script>




</body>
</html>